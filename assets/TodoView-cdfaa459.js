import{_ as M,u as N,R as I,r as j,i as S,o as c,c as r,b as t,t as m,w as V,v as O,d as z,n as x,F as k,j as w,e as f,k as F}from"./index-aacfc320.js";import{c as L,d as R,S as i,e as A,f as K,g as E,h as G,i as P,_ as U}from"./logo-f74522e8.js";const q="/todo_composition/empty1.svg",b="/todo_composition/Vector.svg";const H={setup(){const _=N();console.log(I);const e=j({token:localStorage.getItem("authorization"),nickname:localStorage.getItem("nickname"),url:"https://todoo.5xcamp.us",data:[],textContent:"",Done:[],notDone:[],showNotDoneMessage:!0,showDoneMessage:!1,showall:!0,showNotDone:!1,showDone:!1});let d={headers:{authorization:e.token}};const o=()=>{L(d).then(s=>{console.log(s)}).catch(()=>{_.push("/")})},p=()=>{R(d).then(s=>{e.data=s.data.todos,h()})},D=()=>{if(e.textContent.trim()==="")i.fire("新增失敗","請輸入內容再新增","warning");else{let s={todo:{content:e.textContent}};console.log("url",e.url),console.log("token",e.token),console.log("addObj",s),e.textContent="",A(s,d).then(a=>{e.data.push(a.data),p(),i.fire("成功","新增一筆代辦事項","success")}).catch(a=>{console.log(a)})}},n=(s,a)=>{K(s,d).then(g=>{i.fire("成功","已成功切換狀態","success"),e.data.splice(a,1,g.data),h()})},l=(s,a)=>{i.fire({title:"請確認",text:"一但刪除將無法回復",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}).then(g=>{if(g.isConfirmed)i.fire("已刪除","您的代辦事項刪除成功","success"),console.log(s),E(s,d).then(T=>{console.log(T),e.data.splice(a,1),h()});else return})},u=()=>{i.fire({title:"請確認是否刪除全部",text:"一但刪除將無法回復",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}).then(s=>{if(s.isConfirmed)i.fire("已刪除","您的所有已完成事項刪除成功","success"),Promise.all(e.Done.map(a=>G(a,d))).then(()=>{e.data=e.data.filter(a=>a.completed_at===null),h()});else return})},h=()=>{e.notDone=e.data.filter(s=>s.completed_at===null),e.Done=e.data.filter(s=>s.completed_at!==null)},y=()=>{e.showDoneMessage=!1,e.showNotDoneMessage=!0,e.showall=!0,e.showDone=!1,e.showNotDone=!1},C=()=>{e.notDone=e.data.filter(s=>s.completed_at===null),e.showDoneMessage=!1,e.showNotDoneMessage=!0,e.showall=!1,e.showDone=!1,e.showNotDone=!0},v=()=>{e.Done=e.data.filter(s=>s.completed_at!==null),e.showDoneMessage=!0,e.showNotDoneMessage=!1,e.showall=!1,e.showNotDone=!1,e.showDone=!0},B=()=>{P(d).then(s=>{console.log(s),localStorage.removeItem("authorization"),localStorage.removeItem("nickname"),i.fire("登出成功","歡迎下次使用","success").then(()=>{_.push("/")})}).catch(s=>{console.log(s),i.fire("登出失敗","error")})};return S(()=>{o(),h(),p()}),{data:e,tokentest:o,getTodo:p,addItem:D,checkBoxToDone:n,deleteItem:l,cleanDone:u,count:h,all:y,not:C,done:v,logOut:B}}},J={class:"bg-todo text-black"},Q={class:"container mx-auto min-h-[100vh]"},W={class:"nav mx-auto flex w-[90%] items-center justify-between py-5"},X=t("img",{src:U,alt:""},null,-1),Y={class:"flex text-xl font-bold"},Z={class:"user pr-4"},$={class:"mx-auto w-[90%] md:mt-4 lg:w-[50%]"},ee={class:"input mt-10 flex items-center justify-between text-center md:mt-20"},oe={key:0,class:"empty flex flex-col text-center"},te=t("h3",{class:"my-[50px] text-xl font-black"},"目前尚無待辦事項",-1),ne=t("img",{src:q,class:"mx-auto w-[50%]",alt:""},null,-1),se=[te,ne],le={key:1,class:"list-box m-4 mx-auto w-[100%] rounded-lg border-2 bg-white py-4"},ae={class:"three-button flex justify-around border-b-2 text-center"},ce={class:"list px-10 pt-2"},re={class:"flex"},ie=["onClick","src"],de=["onClick"],ue={class:"flex"},he=["onClick","src"],me=["onClick"],xe={class:"flex"},fe=["onClick","src"],pe=["onClick"],_e={class:"mt-4 flex justify-between px-10"},ge={key:0},ke={key:1};function we(_,e,d,o,p,D){return c(),r("section",J,[t("div",Q,[t("section",W,[X,t("ul",Y,[t("li",Z,m(o.data.nickname),1),t("li",{class:"logoutBtn cursor-pointer",onClick:e[0]||(e[0]=(...n)=>o.logOut&&o.logOut(...n))},"登出")])]),t("section",$,[t("form",ee,[V(t("input",{type:"text",class:"text w-[100%] rounded-lg border-2 p-2 py-4 pl-4",placeholder:"新增代辦事項","onUpdate:modelValue":e[1]||(e[1]=n=>o.data.textContent=n),onKeydown:e[2]||(e[2]=z(F((...n)=>o.addItem&&o.addItem(...n),["prevent"]),["enter"]))},null,544),[[O,o.data.textContent]]),t("i",{onClick:e[3]||(e[3]=(...n)=>o.addItem&&o.addItem(...n)),class:"fa-solid fa-feather-pointed ml-[-50px] cursor-pointer p-2 pr-[15px] text-[25px]"})]),o.data.data.length===0?(c(),r("div",oe,se)):(c(),r("ul",le,[t("ul",ae,[t("li",{class:x(o.data.showall?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[4]||(e[4]=n=>(o.count(),o.all()))}," 全部 ",2),t("li",{class:x(o.data.showNotDone?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[5]||(e[5]=n=>(o.count(),o.not()))}," 待完成 ",2),t("li",{class:x(o.data.showDone?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[6]||(e[6]=n=>(o.count(),o.done()))}," 已完成 ",2)]),t("div",ce,[o.data.showall?(c(!0),r(k,{key:0},w(o.data.data,(n,l)=>(c(),r("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",re,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:u=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,ie),t("p",{class:x(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},m(n.content),3)]),t("li",null,[t("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:u=>o.deleteItem(n.id,l)},null,8,de)])]))),128)):f("",!0),o.data.showDone?(c(!0),r(k,{key:1},w(o.data.Done,(n,l)=>(c(),r("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",ue,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:u=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,he),t("p",{class:x(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},m(n.content),3)]),t("li",null,[t("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:u=>o.deleteItem(n.id,l)},null,8,me)])]))),128)):f("",!0),o.data.showNotDone?(c(!0),r(k,{key:2},w(o.data.notDone,(n,l)=>(c(),r("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",xe,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:u=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,fe),t("p",{class:x(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},m(n.content),3)]),t("li",null,[t("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:u=>o.deleteItem(n.id,l)},null,8,pe)])]))),128)):f("",!0)]),t("div",_e,[o.data.showNotDoneMessage?(c(),r("p",ge,m(o.data.notDone.length)+"個待完成事項",1)):f("",!0),o.data.showDoneMessage?(c(),r("p",ke,m(o.data.Done.length)+" 個已完成事項",1)):f("",!0),t("p",{class:"cursor-pointer text-[#9F9A91]",onClick:e[7]||(e[7]=(...n)=>o.cleanDone&&o.cleanDone(...n))},"清除已完成項目")])]))])])])}const ye=M(H,[["render",we]]);export{ye as default};
