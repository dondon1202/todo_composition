import{_ as I,u as M,R as N,r as j,i as S,o as a,c as r,b as t,t as m,w as V,v as z,d as O,n as x,F as w,j as b,e as _,k as F}from"./index-a3206848.js";import{c as L,d as R,S as c,e as A,f as K,g as E,h as G,i as P,_ as U}from"./logo-86827882.js";const q="/todo_composition/empty1.svg",D="/todo_composition/Vector.svg";const H={setup(){const k=M();console.log(N);const e=j({token:localStorage.getItem("authorization"),nickname:localStorage.getItem("nickname"),url:"https://todoo.5xcamp.us",data:[],textContent:"",Done:[],notDone:[],showNotDoneMessage:!0,showDoneMessage:!1,showall:!0,showNotDone:!1,showDone:!1});let d={headers:{authorization:e.token}};const o=()=>{L(d).then(s=>{console.log(s)}).catch(()=>{k.push("/")})},g=()=>{R(d).then(s=>{e.data=s.data.todos,h()})},y=()=>{if(e.textContent.trim()==="")c.fire("新增失敗","請輸入內容再新增","warning");else{let s={todo:{content:e.textContent}};console.log("url",e.url),console.log("token",e.token),console.log("addObj",s),e.textContent="",A(s,d).then(i=>{e.data.push(i.data),g(),c.fire("成功","新增一筆代辦事項","success")}).catch(i=>{console.log(i)})}},n=(s,i)=>{K(s,d).then(f=>{c.fire("成功","已成功切換狀態","success"),e.data.splice(i,1,f.data),h()})},l=(s,i)=>{c.fire({title:"請確認",text:"一但刪除將無法回復",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}).then(f=>{if(f.isConfirmed)c.fire("已刪除","您的代辦事項刪除成功","success"),console.log(s),E(s,d).then(p=>{console.log(p),e.data.splice(i,1),h()});else return})},u=(s,i)=>{c.fire({title:"請確認是否刪除全部",text:"一但刪除將無法回復",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}).then(f=>{if(f.isConfirmed)c.fire("已刪除","您的所有已完成事項刪除成功","success"),Promise.all(e.Done.map(p=>G.delete(`${e.url}/todos/${p.id}`,{headers:{authorization:e.token}}))).then(()=>{e.data=e.data.filter(p=>p.completed_at===null),h()});else return})},h=()=>{e.notDone=e.data.filter(s=>s.completed_at===null),e.Done=e.data.filter(s=>s.completed_at!==null)},C=()=>{e.showDoneMessage=!1,e.showNotDoneMessage=!0,e.showall=!0,e.showDone=!1,e.showNotDone=!1},v=()=>{e.notDone=e.data.filter(s=>s.completed_at===null),e.showDoneMessage=!1,e.showNotDoneMessage=!0,e.showall=!1,e.showDone=!1,e.showNotDone=!0},B=()=>{e.Done=e.data.filter(s=>s.completed_at!==null),e.showDoneMessage=!0,e.showNotDoneMessage=!1,e.showall=!1,e.showNotDone=!1,e.showDone=!0},T=()=>{P(d).then(s=>{console.log(s),localStorage.removeItem("authorization"),localStorage.removeItem("nickname"),c.fire("登出成功","歡迎下次使用","success").then(()=>{k.push("/")})}).catch(s=>{console.log(s),c.fire("登出失敗","error")})};return S(()=>{o(),h(),g()}),{data:e,tokentest:o,getTodo:g,addItem:y,checkBoxToDone:n,deleteItem:l,cleanDone:u,count:h,all:C,not:v,done:B,logOut:T}}},J={class:"bg-todo text-black"},Q={class:"container mx-auto min-h-[100vh]"},W={class:"nav mx-auto flex w-[90%] items-center justify-between py-5"},X=t("img",{src:U,alt:""},null,-1),Y={class:"flex text-xl font-bold"},Z={class:"user pr-4"},$={class:"mx-auto w-[90%] md:mt-4 lg:w-[50%]"},ee={class:"input mt-10 flex items-center justify-between text-center md:mt-20"},oe={key:0,class:"empty flex flex-col text-center"},te=t("h3",{class:"my-[50px] text-xl font-black"},"目前尚無待辦事項",-1),ne=t("img",{src:q,class:"mx-auto w-[50%]",alt:""},null,-1),se=[te,ne],le={key:1,class:"list-box m-4 mx-auto w-[100%] rounded-lg border-2 bg-white py-4"},ae={class:"three-button flex justify-around border-b-2 text-center"},re={class:"list px-10 pt-2"},ce={class:"flex"},ie=["onClick","src"],de=["onClick"],ue={class:"flex"},he=["onClick","src"],me=["onClick"],xe={class:"flex"},fe=["onClick","src"],pe=["onClick"],_e={class:"mt-4 flex justify-between px-10"},ge={key:0},ke={key:1};function we(k,e,d,o,g,y){return a(),r("section",J,[t("div",Q,[t("section",W,[X,t("ul",Y,[t("li",Z,m(o.data.nickname),1),t("li",{class:"logoutBtn cursor-pointer",onClick:e[0]||(e[0]=(...n)=>o.logOut&&o.logOut(...n))},"登出")])]),t("section",$,[t("form",ee,[V(t("input",{type:"text",class:"text w-[100%] rounded-lg border-2 p-2 py-4 pl-4",placeholder:"新增代辦事項","onUpdate:modelValue":e[1]||(e[1]=n=>o.data.textContent=n),onKeydown:e[2]||(e[2]=O(F((...n)=>o.addItem&&o.addItem(...n),["prevent"]),["enter"]))},null,544),[[z,o.data.textContent]]),t("i",{onClick:e[3]||(e[3]=(...n)=>o.addItem&&o.addItem(...n)),class:"fa-solid fa-feather-pointed ml-[-50px] cursor-pointer p-2 pr-[15px] text-[25px]"})]),o.data.data.length===0?(a(),r("div",oe,se)):(a(),r("ul",le,[t("ul",ae,[t("li",{class:x(o.data.showall?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[4]||(e[4]=n=>(o.count(),o.all()))}," 全部 ",2),t("li",{class:x(o.data.showNotDone?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[5]||(e[5]=n=>(o.count(),o.not()))}," 待完成 ",2),t("li",{class:x(o.data.showDone?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[6]||(e[6]=n=>(o.count(),o.done()))}," 已完成 ",2)]),t("div",re,[o.data.showall?(a(!0),r(w,{key:0},b(o.data.data,(n,l)=>(a(),r("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",ce,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:u=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,ie),t("p",{class:x(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},m(n.content),3)]),t("li",null,[t("img",{src:D,alt:"",id:"delete",class:"cursor-pointer",onClick:u=>o.deleteItem(n.id,l)},null,8,de)])]))),128)):_("",!0),o.data.showDone?(a(!0),r(w,{key:1},b(o.data.Done,(n,l)=>(a(),r("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",ue,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:u=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,he),t("p",{class:x(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},m(n.content),3)]),t("li",null,[t("img",{src:D,alt:"",id:"delete",class:"cursor-pointer",onClick:u=>o.deleteItem(n.id,l)},null,8,me)])]))),128)):_("",!0),o.data.showNotDone?(a(!0),r(w,{key:2},b(o.data.notDone,(n,l)=>(a(),r("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",xe,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:u=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,fe),t("p",{class:x(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},m(n.content),3)]),t("li",null,[t("img",{src:D,alt:"",id:"delete",class:"cursor-pointer",onClick:u=>o.deleteItem(n.id,l)},null,8,pe)])]))),128)):_("",!0)]),t("div",_e,[o.data.showNotDoneMessage?(a(),r("p",ge,m(o.data.notDone.length)+"個待完成事項",1)):_("",!0),o.data.showDoneMessage?(a(),r("p",ke,m(o.data.Done.length)+" 個已完成事項",1)):_("",!0),t("p",{class:"cursor-pointer text-[#9F9A91]",onClick:e[7]||(e[7]=(...n)=>o.cleanDone&&o.cleanDone(...n))},"清除已完成項目")])]))])])])}const ye=I(H,[["render",we]]);export{ye as default};
