import{_ as M,u as N,R as T,r as j,i as z,o as r,c,b as o,t as h,w as R,v as O,d as S,n as m,F as k,j as w,e as g,k as V}from"./index-86832d8e.js";import{a as u,S as i,_ as E}from"./logo-36e78bf4.js";const F="/todo_composition/empty1.svg",b="/todo_composition/Vector.svg";const K={setup(){const _=N();console.log(T);const e=j({token:localStorage.getItem("authorization"),nickname:localStorage.getItem("nickname"),url:"https://todoo.5xcamp.us",data:[],textContent:"",Done:[],notDone:[],showNotDoneMessage:!0,showDoneMessage:!1,showall:!0,showNotDone:!1,showDone:!1}),p=()=>{u.get(`${e.url}/check`,{headers:{authorization:e.token}}).then(s=>{t(),console.log(s)}).catch(()=>{_.push("/")})},t=()=>{u.get(`${e.url}/todos`,{headers:{authorization:e.token}}).then(s=>{e.data=s.data.todos,console.log("data.data",e.data),a()})},D=()=>{if(console.log("data.textContent",e.textContent),e.textContent.trim()==="")i.fire("新增失敗","請輸入內容再新增","warning");else{let s={todo:{content:e.textContent}};console.log("url",e.url),console.log("token",e.token),console.log("addObj",s),e.textContent="",u.post(`${e.url}/todos`,s,{headers:{authorization:e.token}}).then(d=>{e.data.push(d.data),t(),i.fire("成功","新增一筆代辦事項","success")}).catch(d=>{console.log(d)})}},y=(s,d)=>{u.patch(`${e.url}/todos/${s}/toggle`,"",{headers:{authorization:e.token}}).then(x=>{i.fire("成功","已成功切換狀態","success"),e.data.splice(d,1,x.data),a()})},n=(s,d)=>{i.fire({title:"請確認",text:"一但刪除將無法回復",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}).then(x=>{if(x.isConfirmed)i.fire("已刪除","您的代辦事項刪除成功","success"),console.log(s),u.delete(`${e.url}/todos/${s}`,{headers:{authorization:e.token}}).then(f=>{console.log(f),e.data.splice(d,1),a()});else return})},l=(s,d)=>{i.fire({title:"請確認是否刪除全部",text:"一但刪除將無法回復",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}).then(x=>{if(x.isConfirmed)i.fire("已刪除","您的所有已完成事項刪除成功","success"),Promise.all(e.Done.map(f=>u.delete(`${e.url}/todos/${f.id}`,{headers:{authorization:e.token}}))).then(()=>{e.data=e.data.filter(f=>f.completed_at===null),a()});else return})},a=()=>{e.notDone=e.data.filter(s=>s.completed_at===null),e.Done=e.data.filter(s=>s.completed_at!==null)},C=()=>{e.showDoneMessage=!1,e.showNotDoneMessage=!0,e.showall=!0,e.showDone=!1,e.showNotDone=!1},v=()=>{e.notDone=e.data.filter(s=>s.completed_at===null),e.showDoneMessage=!1,e.showNotDoneMessage=!0,e.showall=!1,e.showDone=!1,e.showNotDone=!0},B=()=>{e.Done=e.data.filter(s=>s.completed_at!==null),e.showDoneMessage=!0,e.showNotDoneMessage=!1,e.showall=!1,e.showNotDone=!1,e.showDone=!0},I=()=>{u.delete(`${e.url}/users/sign_out`,{headers:{authorization:e.token}}).then(s=>{console.log(s),localStorage.removeItem("authorization"),localStorage.removeItem("nickname"),i.fire("登出成功","歡迎下次使用","success").then(()=>{_.push("/")})}).catch(s=>{console.log(s),i.fire("登出失敗","error")})};return z(()=>{p(),a(),t()}),{data:e,tokentest:p,getTodo:t,addItem:D,checkBoxToDone:y,deleteItem:n,cleanDone:l,count:a,all:C,not:v,done:B,logOut:I}}},L={class:"bg-todo text-black"},A={class:"container mx-auto min-h-[100vh]"},P={class:"nav mx-auto flex w-[90%] items-center justify-between py-5"},U=o("img",{src:E,alt:""},null,-1),q={class:"flex text-xl font-bold"},G={class:"user pr-4"},H={class:"mx-auto w-[90%] md:mt-4 lg:w-[50%]"},J={class:"input mt-10 flex items-center justify-between text-center md:mt-20"},Q={key:0,class:"empty flex flex-col text-center"},W=o("h3",{class:"my-[50px] text-xl font-black"},"目前尚無待辦事項",-1),X=o("img",{src:F,class:"mx-auto w-[50%]",alt:""},null,-1),Y=[W,X],Z={key:1,class:"list-box m-4 mx-auto w-[100%] rounded-lg border-2 bg-white py-4"},$={class:"three-button flex justify-around border-b-2 text-center"},ee={class:"list px-10 pt-2"},te={class:"flex"},oe=["onClick","src"],ne=["onClick"],se={class:"flex"},le=["onClick","src"],ae=["onClick"],re={class:"flex"},ce=["onClick","src"],ie=["onClick"],de={class:"mt-4 flex justify-between px-10"},ue={key:0},he={key:1};function me(_,e,p,t,D,y){return r(),c("section",L,[o("div",A,[o("section",P,[U,o("ul",q,[o("li",G,h(t.data.nickname),1),o("li",{class:"logoutBtn cursor-pointer",onClick:e[0]||(e[0]=(...n)=>t.logOut&&t.logOut(...n))},"登出")])]),o("section",H,[o("form",J,[R(o("input",{type:"text",class:"text w-[100%] rounded-lg border-2 p-2 py-4 pl-4",placeholder:"新增代辦事項","onUpdate:modelValue":e[1]||(e[1]=n=>t.data.textContent=n),onKeydown:e[2]||(e[2]=S(V((...n)=>t.addItem&&t.addItem(...n),["prevent"]),["enter"]))},null,544),[[O,t.data.textContent]]),o("i",{onClick:e[3]||(e[3]=(...n)=>t.addItem&&t.addItem(...n)),class:"fa-solid fa-feather-pointed ml-[-50px] cursor-pointer p-2 pr-[15px] text-[25px]"})]),t.data.data.length===0?(r(),c("div",Q,Y)):(r(),c("ul",Z,[o("ul",$,[o("li",{class:m(t.data.showall?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[4]||(e[4]=n=>(t.count(),t.all()))}," 全部 ",2),o("li",{class:m(t.data.showNotDone?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[5]||(e[5]=n=>(t.count(),t.not()))}," 待完成 ",2),o("li",{class:m(t.data.showDone?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[6]||(e[6]=n=>(t.count(),t.done()))}," 已完成 ",2)]),o("div",ee,[t.data.showall?(r(!0),c(k,{key:0},w(t.data.data,(n,l)=>(r(),c("ul",{class:"flex justify-between border-b-2 py-4",key:l},[o("li",te,[o("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:a=>t.checkBoxToDone(n.id,l),src:n.completed_at!==null?"/check.svg":"/checkbox.svg"},null,8,oe),o("p",{class:m(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},h(n.content),3)]),o("li",null,[o("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:a=>t.deleteItem(n.id,l)},null,8,ne)])]))),128)):g("",!0),t.data.showDone?(r(!0),c(k,{key:1},w(t.data.Done,(n,l)=>(r(),c("ul",{class:"flex justify-between border-b-2 py-4",key:l},[o("li",se,[o("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:a=>t.checkBoxToDone(n.id,l),src:n.completed_at!==null?"/check.svg":"/checkbox.svg"},null,8,le),o("p",{class:m(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},h(n.content),3)]),o("li",null,[o("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:a=>t.deleteItem(n.id,l)},null,8,ae)])]))),128)):g("",!0),t.data.showNotDone?(r(!0),c(k,{key:2},w(t.data.notDone,(n,l)=>(r(),c("ul",{class:"flex justify-between border-b-2 py-4",key:l},[o("li",re,[o("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:a=>t.checkBoxToDone(n.id,l),src:n.completed_at!==null?"/check.svg":"/checkbox.svg"},null,8,ce),o("p",{class:m(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},h(n.content),3)]),o("li",null,[o("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:a=>t.deleteItem(n.id,l)},null,8,ie)])]))),128)):g("",!0)]),o("div",de,[t.data.showNotDoneMessage?(r(),c("p",ue,h(t.data.notDone.length)+"個待完成事項",1)):g("",!0),t.data.showDoneMessage?(r(),c("p",he,h(t.data.Done.length)+" 個已完成事項",1)):g("",!0),o("p",{class:"cursor-pointer text-[#9F9A91]",onClick:e[7]||(e[7]=(...n)=>t.cleanDone&&t.cleanDone(...n))},"清除已完成項目")])]))])])])}const ge=M(K,[["render",me]]);export{ge as default};
