import{_ as M,u as N,R as T,r as j,i as z,o as r,c,b as t,t as h,w as S,v as V,d as O,n as m,F as k,j as w,e as _,k as F}from"./index-e667e65e.js";import{a as u,S as i,_ as R}from"./logo-36e78bf4.js";const K="/todo_composition/empty1.svg",b="/todo_composition/Vector.svg";const L={setup(){const g=N();console.log(T);const e=j({token:localStorage.getItem("authorization"),nickname:localStorage.getItem("nickname"),url:"https://todoo.5xcamp.us",data:[],textContent:"",Done:[],notDone:[],showNotDoneMessage:!0,showDoneMessage:!1,showall:!0,showNotDone:!1,showDone:!1}),p=()=>{u.get(`${e.url}/check`,{headers:{authorization:e.token}}).then(s=>{o(),console.log(s)}).catch(()=>{g.push("/")})},o=()=>{u.get(`${e.url}/todos`,{headers:{authorization:e.token}}).then(s=>{e.data=s.data.todos,a()})},D=()=>{if(e.textContent.trim()==="")i.fire("新增失敗","請輸入內容再新增","warning");else{let s={todo:{content:e.textContent}};console.log("url",e.url),console.log("token",e.token),console.log("addObj",s),e.textContent="",u.post(`${e.url}/todos`,s,{headers:{authorization:e.token}}).then(d=>{e.data.push(d.data),o(),i.fire("成功","新增一筆代辦事項","success")}).catch(d=>{console.log(d)})}},y=(s,d)=>{u.patch(`${e.url}/todos/${s}/toggle`,"",{headers:{authorization:e.token}}).then(x=>{i.fire("成功","已成功切換狀態","success"),e.data.splice(d,1,x.data),a()})},n=(s,d)=>{i.fire({title:"請確認",text:"一但刪除將無法回復",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}).then(x=>{if(x.isConfirmed)i.fire("已刪除","您的代辦事項刪除成功","success"),console.log(s),u.delete(`${e.url}/todos/${s}`,{headers:{authorization:e.token}}).then(f=>{console.log(f),e.data.splice(d,1),a()});else return})},l=(s,d)=>{i.fire({title:"請確認是否刪除全部",text:"一但刪除將無法回復",icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"再想想"}).then(x=>{if(x.isConfirmed)i.fire("已刪除","您的所有已完成事項刪除成功","success"),Promise.all(e.Done.map(f=>u.delete(`${e.url}/todos/${f.id}`,{headers:{authorization:e.token}}))).then(()=>{e.data=e.data.filter(f=>f.completed_at===null),a()});else return})},a=()=>{e.notDone=e.data.filter(s=>s.completed_at===null),e.Done=e.data.filter(s=>s.completed_at!==null)},C=()=>{e.showDoneMessage=!1,e.showNotDoneMessage=!0,e.showall=!0,e.showDone=!1,e.showNotDone=!1},v=()=>{e.notDone=e.data.filter(s=>s.completed_at===null),e.showDoneMessage=!1,e.showNotDoneMessage=!0,e.showall=!1,e.showDone=!1,e.showNotDone=!0},B=()=>{e.Done=e.data.filter(s=>s.completed_at!==null),e.showDoneMessage=!0,e.showNotDoneMessage=!1,e.showall=!1,e.showNotDone=!1,e.showDone=!0},I=()=>{u.delete(`${e.url}/users/sign_out`,{headers:{authorization:e.token}}).then(s=>{console.log(s),localStorage.removeItem("authorization"),localStorage.removeItem("nickname"),i.fire("登出成功","歡迎下次使用","success").then(()=>{g.push("/")})}).catch(s=>{console.log(s),i.fire("登出失敗","error")})};return z(()=>{p(),a(),o()}),{data:e,tokentest:p,getTodo:o,addItem:D,checkBoxToDone:y,deleteItem:n,cleanDone:l,count:a,all:C,not:v,done:B,logOut:I}}},A={class:"bg-todo text-black"},E={class:"container mx-auto min-h-[100vh]"},P={class:"nav mx-auto flex w-[90%] items-center justify-between py-5"},U=t("img",{src:R,alt:""},null,-1),q={class:"flex text-xl font-bold"},G={class:"user pr-4"},H={class:"mx-auto w-[90%] md:mt-4 lg:w-[50%]"},J={class:"input mt-10 flex items-center justify-between text-center md:mt-20"},Q={key:0,class:"empty flex flex-col text-center"},W=t("h3",{class:"my-[50px] text-xl font-black"},"目前尚無待辦事項",-1),X=t("img",{src:K,class:"mx-auto w-[50%]",alt:""},null,-1),Y=[W,X],Z={key:1,class:"list-box m-4 mx-auto w-[100%] rounded-lg border-2 bg-white py-4"},$={class:"three-button flex justify-around border-b-2 text-center"},ee={class:"list px-10 pt-2"},oe={class:"flex"},te=["onClick","src"],ne=["onClick"],se={class:"flex"},le=["onClick","src"],ae=["onClick"],re={class:"flex"},ce=["onClick","src"],ie=["onClick"],de={class:"mt-4 flex justify-between px-10"},ue={key:0},he={key:1};function me(g,e,p,o,D,y){return r(),c("section",A,[t("div",E,[t("section",P,[U,t("ul",q,[t("li",G,h(o.data.nickname),1),t("li",{class:"logoutBtn cursor-pointer",onClick:e[0]||(e[0]=(...n)=>o.logOut&&o.logOut(...n))},"登出")])]),t("section",H,[t("form",J,[S(t("input",{type:"text",class:"text w-[100%] rounded-lg border-2 p-2 py-4 pl-4",placeholder:"新增代辦事項","onUpdate:modelValue":e[1]||(e[1]=n=>o.data.textContent=n),onKeydown:e[2]||(e[2]=O(F((...n)=>o.addItem&&o.addItem(...n),["prevent"]),["enter"]))},null,544),[[V,o.data.textContent]]),t("i",{onClick:e[3]||(e[3]=(...n)=>o.addItem&&o.addItem(...n)),class:"fa-solid fa-feather-pointed ml-[-50px] cursor-pointer p-2 pr-[15px] text-[25px]"})]),o.data.data.length===0?(r(),c("div",Q,Y)):(r(),c("ul",Z,[t("ul",$,[t("li",{class:m(o.data.showall?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[4]||(e[4]=n=>(o.count(),o.all()))}," 全部 ",2),t("li",{class:m(o.data.showNotDone?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[5]||(e[5]=n=>(o.count(),o.not()))}," 待完成 ",2),t("li",{class:m(o.data.showDone?"border-b-4 font-black border-[#fadd9b] mb-[-2px] w-[33%] cursor-pointer pb-2 text-lg":" mb-[-2px] w-[33%] cursor-pointer pb-2"),onClick:e[6]||(e[6]=n=>(o.count(),o.done()))}," 已完成 ",2)]),t("div",ee,[o.data.showall?(r(!0),c(k,{key:0},w(o.data.data,(n,l)=>(r(),c("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",oe,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:a=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,te),t("p",{class:m(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},h(n.content),3)]),t("li",null,[t("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:a=>o.deleteItem(n.id,l)},null,8,ne)])]))),128)):_("",!0),o.data.showDone?(r(!0),c(k,{key:1},w(o.data.Done,(n,l)=>(r(),c("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",se,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:a=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,le),t("p",{class:m(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},h(n.content),3)]),t("li",null,[t("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:a=>o.deleteItem(n.id,l)},null,8,ae)])]))),128)):_("",!0),o.data.showNotDone?(r(!0),c(k,{key:2},w(o.data.notDone,(n,l)=>(r(),c("ul",{class:"flex justify-between border-b-2 py-4",key:l},[t("li",re,[t("img",{class:"flex h-[22px] w-[22px] cursor-pointer",type:"checkbox",onClick:a=>o.checkBoxToDone(n.id,l),src:n.completed_at!==null?"./check.svg":"./checkbox.svg"},null,8,ce),t("p",{class:m(n.completed_at!==null?"ml-4  line-through text-gray-300":"ml-4 ")},h(n.content),3)]),t("li",null,[t("img",{src:b,alt:"",id:"delete",class:"cursor-pointer",onClick:a=>o.deleteItem(n.id,l)},null,8,ie)])]))),128)):_("",!0)]),t("div",de,[o.data.showNotDoneMessage?(r(),c("p",ue,h(o.data.notDone.length)+"個待完成事項",1)):_("",!0),o.data.showDoneMessage?(r(),c("p",he,h(o.data.Done.length)+" 個已完成事項",1)):_("",!0),t("p",{class:"cursor-pointer text-[#9F9A91]",onClick:e[7]||(e[7]=(...n)=>o.cleanDone&&o.cleanDone(...n))},"清除已完成項目")])]))])])])}const _e=M(L,[["render",me]]);export{_e as default};
